<%= form_with(model: event, local: true, class: "form-horizontal") do |form| %>
  <% if event.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(event.errors.count, "error") %> prohibited this event from being saved:</h2>

      <ul>
      <% event.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
  
  <%= form.hidden_field :provider_id, value: current_user.id %>

  <div class="form-group row">
    <%= form.label :name, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.text_field :name, :class => "form-control", required: true %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label "Tags", :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.text_field :all_tags, placeholder: "Tags separated with comma", :class => "form-control" %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :description, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.text_area :description, :class => "form-control", required: true %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :place, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%# <%= form.number_field :place_id, :class => "form-control" %> 
      <%= select("event", "place_id", Place.all.collect {|place| [ place.name, place.id ] }, { include_blank: true }, class: "form-control") %>
    </div>
  </div>
  
  <div class="form-group row">
    <%= form.label :age, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.number_field :age_filter, :class => "form-control", :min => 0, required: true %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :start, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.datetime_field :start %>
      <%#= form.text_field :start, :id => "start", :class => "form-control", :autocomplete => "off", required: true %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :end, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.datetime_field :end %>
      <%#= form.text_field :end, :id => "end", :class => "form-control", :autocomplete => "off", required: true %>
    </div>
  </div>

  <div class="form-group row">
    <%= form.label :pictures, :class => "control-label col-sm-2" %>
    <div class="col-sm-10">
      <%= form.file_field :pictures, :multiple => true %>
    </div>
  </div>

  <div class="form-group"> 
    <div class="col-sm-offset-2 col-sm-10">
      <%= form.submit :class => "btn btn-primary" %>
    </div>
  </div>

<script>
  $('#start').datetimepicker({ 
    footer: true,
    format: 'HH:MM yyyy-mm-dd',
    datepicker: { 
      minDate: function() {
        var date = new Date();
        return new Date(date.getFullYear(), date.getMonth(), date.getDate());
      }
    }
  });
  $('#end').datetimepicker({ 
    footer: true,
    format: 'HH:MM yyyy-mm-dd',
    datepicker: { 
      minDate: function() {
        var date = new Date();
        return new Date(date.getFullYear(), date.getMonth(), date.getDate());
      }
    }
  });
</script>
<% end %>
